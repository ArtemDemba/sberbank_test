# Process data service
***

### Требования к тестовому заданию:
- [X] Принятие дерева извлечений
- [X] Постпроцессинг
- [X] Функции нормализации 


### Запуск приложения
```
pip install pipenv
pipenv shell
pipenv install 
uvicorn main:app --reload --host 0.0.0.0
```

### Endpoints

| Method | Url                                      | Description      | Headers                        |
|:-------|:-----------------------------------------|:-----------------|:-------------------------------|
| GET    | http://0.0.0.0:8000/docs                 | Swagger          | *                              |
| POST   | http://0.0.0.0:8000/api/v1/process_tree/ | Process json/xml | Content-Type: application/json |

### Curl testing after server's start
*Тестовые xml и json данные находятся по пути: `examples/`*
#### XML
``
curl --location --request POST 'http://0.0.0.0:8000/api/v1/documents/process' \
--header 'Content-Type: application/xml' \
--data-raw 
```xml
<root>
    <doc1>
    <ДатаДокумента>5 ноября 2022 года</ДатаДокумента>
    <Продавец>
        <Имя>Иванов Лев Давидович</Имя>
    </Продавец>
    <Продавец>
        <Имя>Петрова Мария Васильевна</Имя>
    </Продавец>
    <Оплата>
        <Сумма>10000,00 рублей</Сумма>
     </Оплата>
    <Покупатель>ООО Управляющая компания «Арасака»</Покупатель>
    <ПредметДоговора>
        <ВидОбъектаНедвижимости>ЗемельныйУчасток</ВидОбъектаНедвижимости>
        <ВидРазрешенногоИспользования>для сельскохозяйственного производства</ВидРазрешенногоИспользования>
        <КадастровыйНомер>1237:09234123532:4521</КадастровыйНомер>
        <Площадь>5 га</Площадь>
    </ПредметДоговора>
    </doc1>
    <doc2>
    <Оплата>
        <СрокОплаты>в течение 30 дней со дня подписания договора</СрокОплаты>
    </Оплата>
    <ПредметДоговора>
        <Адрес>Московская область, 5 км от ориентира Ракушки</Адрес>
        <ОбъектыНаЗемельномУчастке>здание</ОбъектыНаЗемельномУчастке>
        <ОбъектыНаЗемельномУчастке>склад</ОбъектыНаЗемельномУчастке>
        <ОбременениеОбъектаНедвижимости>ипотека</ОбременениеОбъектаНедвижимости>
        <ОбъектПереданПокупателюДоДоговора>НЕТ</ОбъектПереданПокупателюДоДоговора>
    </ПредметДоговора>
    </doc2>
</root>
```


#### JSON
``
curl --location --request POST 'http://localhost:8000/api/v1/process_tree/' \
--header 'Content-Type: application/json' \
--data-raw 
```json
{
  "tree1": {
    "ДатаДокумента": "5 ноября 2022",
    "Продавец": [
      {
        "Имя": "Иванов Лев Давидович"
      },
      {
        "Имя": "Петрова Мария Васильевна"
      }
    ],
    "Оплата": {
      "Сумма": "10000,00 рублей"
    },
    "Покупатель": "ООО Управляющая компания «Арасака»",
    "ПредметДоговора": {
      "ВидОбъектаНедвижимости": "ЗемельныйУчасток",
      "ВидРазрешенногоИспользования": "для сельскохозяйственного производства",
      "КадастровыйНомер": "1237:09234123532:4521",
      "Площадь": "5 га"
    }
  },
  "tree2": {
    "Оплата": {
      "СрокОплаты": "полтора месяца"
    },
    "ПредметДоговора": {
      "Адрес": "Московская область, 5 км от ориентира Ракушки",
      "ОбъектыНаЗемельномУчастке": [
        "здание",
        "склад"
      ],
      "ОбременениеОбъектаНедвижимости": "ипотека",
      "ОбъектПереданПокупателюДоДоговора": "НЕТ"
    }
  }
}
```